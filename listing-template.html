<!--
Copyright (C) The Greek Directory, 2025-present. All rights reserved.
This source code is proprietary and no part may not be used, reproduced, or distributed 
without written permission from The Greek Directory. Unauthorized use, copying, modification, 
or distribution of this code can result in legal action to the fullest extent permitted by law.
-->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    
    <title>{{BUSINESS_NAME}}{{CITY_STATE}} | The Greek Directory</title>

    <meta name="description" content="{{TAGLINE}}{{IN_CITY}}. View address, phone, hours, and photos.">
    <meta property="og:title" content="{{BUSINESS_NAME}}{{CITY_STATE}} | The Greek Directory">
    <meta property="og:description" content="{{TAGLINE}}{{IN_CITY}}">
    <meta property="og:type" content="business.business">
    <meta property="og:url" content="{{LISTING_URL}}">
    <meta property="og:image" content="{{LOGO}}">
    <style>
    .pwa-splash {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: white;
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 9999;
        transition: opacity 0.5s ease, visibility 0.5s ease;
    }
    
    .pwa-splash.fade-out {
        opacity: 0;
        visibility: hidden;
    }
    
    .pwa-splash-logo {
        width: 120px;
        height: auto;
    }
    
    @media (prefers-color-scheme: dark) {
        .pwa-splash {
            background: #000000;
        }
    }
    /* Copyright (C) The Greek Directory, 2025-present. All rights reserved. */
</style>

    <link rel="stylesheet" href="/css/pwa.css">
    <link rel="canonical" href="{{LISTING_URL}}">
    <link rel="icon" href="https://static.thegreekdirectory.org/img/logo/bluefavicon.png" media="(prefers-color-scheme: light)">
    <link rel="icon" href="https://static.thegreekdirectory.org/img/logo/whitefavicon.png" media="(prefers-color-scheme: dark)">
    <link rel="apple-touch-icon" href="https://static.thegreekdirectory.org/img/logo/blue.svg">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="manifest" href="/manifest.json">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <!-- Copyright (C) The Greek Directory, 2025-present. All rights reserved. -->
    
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "LocalBusiness",
        "name": "{{BUSINESS_NAME}}",
        "description": "{{TAGLINE}}",
        "url": "{{LISTING_URL}}",
        "image": "{{LOGO}}",
        "address": {
            "@type": "PostalAddress",
            "streetAddress": "{{ADDRESS}}",
            "addressLocality": "{{CITY}}",
            "addressRegion": "{{STATE}}",
            "postalCode": "{{ZIP_CODE}}",
            "addressCountry": "{{COUNTRY}}"
        },
        "telephone": "{{PHONE}}",
        "openingHoursSpecification": {{HOURS_SCHEMA}}
    }
    </script>

    <!-- Copyright (C) The Greek Directory, 2025-present. All rights reserved. -->
    
    <style>
        /*
        Copyright (C) The Greek Directory, 2025-present. All rights reserved.
        */
        
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; }
        .carousel-container { position: relative; width: 100%; overflow: hidden; }
        .carousel-track { display: flex; transition: transform 0.5s ease; }
        .carousel-slide { min-width: 100%; height: 100%; }
        .carousel-dots { position: absolute; bottom: 15px; left: 50%; transform: translateX(-50%); display: flex; gap: 8px; z-index: 10; }
        .carousel-dot { width: 8px; height: 8px; border-radius: 50%; background: rgba(255,255,255,0.5); cursor: pointer; transition: all 0.3s; }
        .carousel-dot.active { background: white; width: 24px; border-radius: 4px; }
        .carousel-nav { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(0,0,0,0.5); color: white; padding: 10px 15px; cursor: pointer; z-index: 10; border-radius: 4px; font-size: 20px; user-select: none; }
        .carousel-nav:hover { background: rgba(0,0,0,0.7); }
        .carousel-prev { left: 10px; }
        .carousel-next { right: 10px; }
        
        /* Copyright (C) The Greek Directory, 2025-present. All rights reserved. */
        
        .social-icon { display: inline-flex; align-items: center; justify-content: center; width: 44px; height: 44px; border-radius: 50%; transition: all 0.3s; text-decoration: none; }
        .social-icon:hover { transform: scale(1.1); }
        .social-facebook { background: #1877F2; color: white; }
        .social-instagram { background: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%); color: white; }
        .social-twitter { background: #000000; color: white; }
        .social-youtube { background: #FF0000; color: white; }
        .social-tiktok { background: #000000; color: white; }
        .social-linkedin { background: #0077B5; color: white; }
        .social-google { background: #4285F4; color: white; }
        .social-yelp { background: #D32323; color: white; }
        .social-tripadvisor { background: #00AF87; color: white; }
        .social-other { background: #6B7280; color: white; }
        .share-button { display: inline-flex; align-items: center; justify-content: center; width: 44px; height: 44px; border-radius: 50%; transition: all 0.3s; text-decoration: none; cursor: pointer; }
        .share-button:hover { transform: scale(1.1); }
        .share-sms { background: #10b981; color: white; }
        .share-email { background: #ea580c; color: white; }
        
        /* Copyright (C) The Greek Directory, 2025-present. All rights reserved. */
        
        #listingMap { width: 100%; height: 400px; border-radius: 8px; pointer-events: none; }
        #listingMap.active { pointer-events: auto; }
        .badge { font-size: 11px; padding: 3px 8px; border-radius: 4px; font-weight: 600; display: inline-block; }
        .badge-open { background: #10b981; color: white; }
        .badge-closed { background: #ef4444; color: white; }
        .badge-featured { background: #fbbf24; color: #78350f; }
        .badge-verified { background: #0000FF; color: white; }
        .badge-claimed { background: #6B7280; color: white; }
        .hours-disclaimer { background: #fef3c7; border: 1px solid #fbbf24; color: #78350f; padding: 8px 12px; border-radius: 6px; font-size: 13px; margin-top: 8px; }
        .card-shadow { box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1); }
        .open-now { color: #10b981; font-weight: 600; font-size: 14px; }
        .closed-now { color: #ef4444; font-weight: 600; font-size: 14px; }
        .category-pill { cursor: pointer; transition: all 0.2s; position: relative; }
        .category-pill:hover { opacity: 0.8; }
        .subcategories-display { display: none; margin-top: 8px; }
        .subcategories-display.active { display: block; }
        .subcategory-tag { display: inline-block; background: #e5e7eb; color: #374151; padding: 4px 10px; border-radius: 12px; font-size: 12px; margin: 4px 4px 4px 0; }
        .owner-info-section { background: #f9fafb; border: 1px solid #e5e7eb; border-radius: 8px; padding: 16px; margin-top: 24px; margin-bottom: 24px; }
        
        /* Copyright (C) The Greek Directory, 2025-present. All rights reserved. */
        
        @media (min-width: 768px) {
            .social-map-grid { display: grid; grid-template-columns: 1fr 400px; gap: 24px; }
        }
        @media (max-width: 767px) {
            .share-section { margin-bottom: 24px; }
        }
        
        @media (prefers-color-scheme: dark) {
            body { background: #1a1a1a; color: #e5e7eb; }
            header { background: #2a2a2a !important; border-color: #3a3a3a; }
            .bg-white { background: #2a2a2a !important; }
            .bg-gray-50 { background: #1a1a1a !important; }
            .bg-gray-100 { background: #3a3a3a !important; }
            .bg-gray-200 { background: #404040 !important; }
            .text-gray-900 { color: #e5e7eb !important; }
            .text-gray-700 { color: #b0b0b0 !important; }
            .text-gray-600 { color: #999 !important; }
            .border-gray-300 { border-color: #404040 !important; }
            .shadow-sm, .shadow, .shadow-lg, .card-shadow { box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.5) !important; }
            .hover\:text-gray-900:hover { color: #e5e7eb !important; }
            img { pointer-events: none; user-select: none; -webkit-user-drag: none; }
            .social-icon svg { pointer-events: none; user-select: none; }
            .hours-disclaimer { background: #3a3a00; border-color: #8a7a00; color: #ffd700; }
            .leaflet-container { background: #1a1a1a; }
            .leaflet-popup-content-wrapper { background: #2a2a2a !important; color: #e5e5e5 !important; }
            .leaflet-popup-tip { background: #2a2a2a !important; }
            .subcategory-tag { background: #404040; color: #e5e5e5; }
            .owner-info-section { background: #2a2a2a; border-color: #404040; }
        }
        
        /* Copyright (C) The Greek Directory, 2025-present. All rights reserved. */
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <div data-partial="header"></div>

    <!-- Copyright (C) The Greek Directory, 2025-present. All rights reserved. -->

    <div class="max-w-4xl mx-auto px-4 py-8">
        <div class="bg-white rounded-lg overflow-hidden mb-6 card-shadow">
            <div class="carousel-container h-64 md:h-96 bg-gray-200" id="photoCarousel" data-current="0">
                <div class="carousel-track h-full">
                    {{PHOTOS_SLIDES}}
                </div>
                {{CAROUSEL_CONTROLS}}
            </div>
        </div>

        <div class="bg-white rounded-lg p-6 mb-6 card-shadow">
            <div class="flex justify-between items-start mb-4">
                <div class="flex-1">
                    <div class="flex items-center gap-2 mb-4 flex-wrap">
                        <span class="text-sm font-semibold px-3 py-1 rounded-full text-white category-pill" style="background-color:#055193;" onclick="toggleSubcategories()">
                            {{CATEGORY}}
                        </span>
                        <div class="subcategories-display" id="subcategoriesDisplay">
                            {{SUBCATEGORIES_TAGS}}
                        </div>
                        {{STATUS_BADGES}}
                    </div>
                    <h2 class="text-3xl font-bold text-gray-900 mb-2">{{BUSINESS_NAME}}</h2>
                    {{TAGLINE_DISPLAY}}
                </div>
                <img src="{{LOGO}}" alt="{{BUSINESS_NAME}} logo" class="w-20 h-20 md:w-24 md:h-24 rounded-lg object-cover ml-4 flex-shrink-0 card-shadow">
            </div>

            <p class="text-gray-700 mb-6">{{DESCRIPTION}}</p>

            <!-- Copyright (C) The Greek Directory, 2025-present. All rights reserved. -->

            <div class="space-y-3 mb-6">
                {{ADDRESS_SECTION}}
                {{PHONE_SECTION}}
                {{EMAIL_SECTION}}
                {{WEBSITE_SECTION}}
                {{HOURS_SECTION}}
            </div>

            <div class="flex flex-wrap gap-3 mb-6">
                {{PHONE_BUTTON}}
                {{EMAIL_BUTTON}}
                {{WEBSITE_BUTTON}}
                {{DIRECTIONS_BUTTON}}
            </div>

            {{OWNER_INFO_SECTION}}

            <div class="social-map-grid">
                <div>
                    {{SOCIAL_MEDIA_SECTION}}
                    {{REVIEW_SECTION}}
                    <div class="share-section">
                        <h2 class="text-xl font-bold text-gray-900 mb-3">Share</h2>
                        <div class="flex flex-wrap gap-2">
                            <a href="https://www.facebook.com/sharer/sharer.php?u={{LISTING_URL}}%3Futm_source%3Dfacebook%26utm_medium%3Dsocial%26utm_campaign%3Dshare" target="_blank" rel="noopener noreferrer" class="share-button social-facebook" title="Share on Facebook" onclick="trackClick('share', 'facebook')">
                                <svg width="22" height="22" fill="currentColor" viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
                            </a>
                            <a href="https://twitter.com/intent/tweet?text=Check%20out%20{{BUSINESS_NAME_ENCODED}}%20on%20The%20Greek%20Directory!&url={{LISTING_URL}}%3Futm_source%3Dtwitter%26utm_medium%3Dsocial%26utm_campaign%3Dshare" target="_blank" rel="noopener noreferrer" class="share-button social-twitter" title="Share on X" onclick="trackClick('share', 'twitter')">
                                <svg width="22" height="22" fill="currentColor" viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
                            </a>
                            <a href="https://www.linkedin.com/sharing/share-offsite/?url={{LISTING_URL}}%3Futm_source%3Dlinkedin%26utm_medium%3Dsocial%26utm_campaign%3Dshare" target="_blank" rel="noopener noreferrer" class="share-button social-linkedin" title="Share on LinkedIn" onclick="trackClick('share', 'linkedin')">
                                <svg width="22" height="22" fill="currentColor" viewBox="0 0 24 24"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
                            </a>
                            <a href="sms:?&body=Check%20out%20{{BUSINESS_NAME_ENCODED}}%20on%20The%20Greek%20Directory!%20{{LISTING_URL}}%3Futm_source%3Dsms%26utm_medium%3Dsocial%26utm_campaign%3Dshare" class="share-button share-sms" title="Share via SMS" onclick="trackClick('share', 'sms')">
                                <svg width="22" height="22" fill="currentColor" viewBox="0 0 24 24"><path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"/></svg>
                            </a>
                            <a href="mailto:?subject={{BUSINESS_NAME_ENCODED}}%20on%20The%20Greek%20Directory&body=Check%20out%20{{BUSINESS_NAME_ENCODED}}%20on%20The%20Greek%20Directory!%0A{{LISTING_URL}}%3Futm_source%3Demail%26utm_medium%3Dsocial%26utm_campaign%3Dshare" class="share-button share-email" title="Share via Email" onclick="trackClick('share', 'email')">
                                <svg width="22" height="22" fill="currentColor" viewBox="0 0 24 24"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/></svg>
                            </a>
                            <button onclick="shareNative()" class="share-button social-other" title="Share">
                                <svg width="22" height="22" fill="currentColor" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"/></svg>
                            </button>
                        </div>
                    </div>
                </div>
                
                {{MAP_SECTION}}
            </div>
        </div>

        <!-- Copyright (C) The Greek Directory, 2025-present. All rights reserved. -->

        {{RELATED_LISTINGS_SECTION}}

        {{CLAIM_BUTTON}}
    </div>

    <!-- Footer -->
    <div data-partial="footer"></div>

    <!-- Copyright (C) The Greek Directory, 2025-present. All rights reserved. -->
    
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="/js/partials-loader.js"></script>
    <script src="/js/pwa/storage.js"></script>
    <script src="/js/pwa/app.js"></script>
    <script src="/js/pwa/dock.js"></script>
    <script src="/js/pwa/starred.js"></script>

    <script>
    // Copyright (C) The Greek Directory, 2025-present. All rights reserved.
    
    // Store current listing data for starring
    window.currentListingData = {
        id: '{{LISTING_ID}}',
        business_name: '{{BUSINESS_NAME}}',
        tagline: '{{TAGLINE}}',
        description: '{{DESCRIPTION}}',
        category: '{{CATEGORY}}',
        city: '{{CITY}}',
        state: '{{STATE}}',
        address: '{{ADDRESS}}',
        phone: '{{PHONE}}',
        email: '{{EMAIL}}',
        website: '{{WEBSITE}}',
        logo: '{{LOGO}}',
        photos: [{{PHOTOS_ARRAY}}],
        slug: '{{SLUG}}'
    };
    
    // Update star button state on load
    document.addEventListener('DOMContentLoaded', async () => {
        if (window.PWAStorage) {
            await window.PWAStorage.init();
            const isStarred = await window.PWAStorage.isStarred('{{LISTING_ID}}');
            const starButton = document.querySelector('.star-button');
            if (starButton && isStarred) {
                starButton.classList.add('starred');
            }
        }
    });
    
    // Copyright (C) The Greek Directory, 2025-present. All rights reserved.
    </script>
    <script>
        /*
        Copyright (C) The Greek Directory, 2025-present. All rights reserved.
        */
        
        const SUPABASE_URL = 'https://luetekzqrrgdxtopzvqw.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imx1ZXRla3pxcnJnZHh0b3B6dnF3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgzNDc2NDcsImV4cCI6MjA4MzkyMzY0N30.TIrNG8VGumEJc_9JvNHW-Q-UWfUGpPxR0v8POjWZJYg';
        
        const supabaseClient = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
        
        const totalSlides = {{TOTAL_PHOTOS}};
        const businessName = '{{BUSINESS_NAME}}';
        const listingUrl = '{{LISTING_URL}}';
        const listingId = '{{LISTING_ID}}';
        const hoursData = {{HOURS_JSON}};
        
        function toggleSubcategories() {
            const display = document.getElementById('subcategoriesDisplay');
            display.classList.toggle('active');
        }
        
        function formatPhoneDisplay(phone) {
            if (!phone) return '';
            const digits = phone.replace(/\D/g, '');
            if (phone.startsWith('+1') && digits.length === 11) {
                return `(${digits.substr(1, 3)}) ${digits.substr(4, 3)}-${digits.substr(7, 4)}`;
            }
            return phone;
        }
        
        /* Copyright (C) The Greek Directory, 2025-present. All rights reserved. */
        
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('.text-gray-600, .text-gray-700').forEach(el => {
                if (el.textContent.includes('+1')) {
                    const phone = el.textContent.match(/\+1\d{10}/);
                    if (phone) {
                        el.textContent = el.textContent.replace(phone[0], formatPhoneDisplay(phone[0]));
                    }
                }
            });
        });
        
        async function trackAnalytics(action, platform) {
            try {
                const { data, error } = await supabaseClient
                    .from('listing_analytics')
                    .insert({
                        listing_id: listingId,
                        action: action,
                        platform: platform || null,
                        timestamp: new Date().toISOString(),
                        user_agent: navigator.userAgent
                    });
                
                if (error) throw error;
            } catch (e) {
                console.log('Analytics tracking error:', e.message);
            }
        }
        
        window.addEventListener('load', () => {
            trackAnalytics('view');
        });
        
        function trackClick(action, platform) {
            trackAnalytics(action, platform);
        }
        
        /* Copyright (C) The Greek Directory, 2025-present. All rights reserved. */
        
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('a[href^="tel:"]').forEach(el => {
                el.addEventListener('click', () => trackClick('call'));
            });
            
            document.querySelectorAll('a[href*="maps"]').forEach(el => {
                el.addEventListener('click', () => trackClick('directions'));
            });
            
            const websiteDomain = '{{WEBSITE_DOMAIN}}';
            if (websiteDomain) {
                document.querySelectorAll(`a[href*="${websiteDomain}"]`).forEach(el => {
                    el.addEventListener('click', () => trackClick('website'));
                });
            }
            
            checkAdminRedirect();
        });
        
        function checkAdminRedirect() {
            const path = window.location.pathname;
            if (path.endsWith('/admin')) {
                const slug = listingId;
                window.location.href = `/business.html?slug=${slug}`;
            }
        }

        /* Copyright (C) The Greek Directory, 2025-present. All rights reserved. */

        function updateOpenClosedBadge() {
            const badge = document.getElementById('openClosedBadge');
            const statusText = document.getElementById('openStatusText');
            if (!hoursData) return;
            
            const now = new Date();
            const centralTime = new Date(now.toLocaleString('en-US', { timeZone: 'America/Chicago' }));
            const days = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];
            const today = days[centralTime.getDay()];
            const todayHours = hoursData[today];
            
            if (!todayHours || todayHours.toLowerCase() === 'closed') {
                if (badge) {
                    badge.textContent = 'Closed';
                    badge.className = 'badge badge-closed';
                }
                if (statusText) {
                    statusText.textContent = 'Closed Now';
                    statusText.className = 'closed-now';
                }
                return;
            }
            
            if (todayHours.toLowerCase().includes('24') || todayHours.toLowerCase().includes('open 24')) {
                if (badge) {
                    badge.textContent = 'Open';
                    badge.className = 'badge badge-open';
                }
                if (statusText) {
                    statusText.textContent = 'Open 24 Hours';
                    statusText.className = 'open-now';
                }
                return;
            }
            
            /* Copyright (C) The Greek Directory, 2025-present. All rights reserved. */
            
            const match = todayHours.match(/(\d{1,2}):(\d{2})\s*(AM|PM)\s*-\s*(\d{1,2}):(\d{2})\s*(AM|PM)/i);
            if (!match) {
                if (badge) badge.style.display = 'none';
                if (statusText) statusText.style.display = 'none';
                return;
            }
            
            const [, startHour, startMin, startPeriod, endHour, endMin, endPeriod] = match;
            let start = parseInt(startHour);
            let end = parseInt(endHour);
            
            if (startPeriod.toUpperCase() === 'PM' && start !== 12) start += 12;
            if (startPeriod.toUpperCase() === 'AM' && start === 12) start = 0;
            if (endPeriod.toUpperCase() === 'PM' && end !== 12) end += 12;
            if (endPeriod.toUpperCase() === 'AM' && end === 12) end = 0;
            
            const currentMinutes = centralTime.getHours() * 60 + centralTime.getMinutes();
            const startMinutes = start * 60 + parseInt(startMin);
            let endMinutes = end * 60 + parseInt(endMin);
            
            if (endMinutes < startMinutes) {
                if (currentMinutes >= startMinutes || currentMinutes <= endMinutes) {
                    if (badge) {
                        badge.textContent = 'Open';
                        badge.className = 'badge badge-open';
                    }
                    if (statusText) {
                        statusText.textContent = 'Open Now';
                        statusText.className = 'open-now';
                    }
                } else {
                    if (badge) {
                        badge.textContent = 'Closed';
                        badge.className = 'badge badge-closed';
                    }
                    if (statusText) {
                        statusText.textContent = 'Closed Now';
                        statusText.className = 'closed-now';
                    }
                }
            } else {
                if (currentMinutes >= startMinutes && currentMinutes <= endMinutes) {
                    if (badge) {
                        badge.textContent = 'Open';
                        badge.className = 'badge badge-open';
                    }
                    if (statusText) {
                        statusText.textContent = 'Open Now';
                        statusText.className = 'open-now';
                    }
                } else {
                    if (badge) {
                        badge.textContent = 'Closed';
                        badge.className = 'badge badge-closed';
                    }
                    if (statusText) {
                        statusText.textContent = 'Closed Now';
                        statusText.className = 'closed-now';
                    }
                }
            }
        }
        
        /* Copyright (C) The Greek Directory, 2025-present. All rights reserved. */
        
        if (totalSlides > 1) {
            function goToSlide(index) {
                const carousel = document.getElementById('photoCarousel');
                if (!carousel) return;
                const track = carousel.querySelector('.carousel-track');
                const dots = carousel.querySelectorAll('.carousel-dot');
                
                track.style.transform = `translateX(-${index * 100}%)`;
                dots.forEach((dot, i) => {
                    dot.classList.toggle('active', i === index);
                });
                carousel.dataset.current = index;
            }

            function nextSlide() {
                const carousel = document.getElementById('photoCarousel');
                if (!carousel) return;
                const current = parseInt(carousel.dataset.current || 0);
                goToSlide((current + 1) % totalSlides);
            }

            function prevSlide() {
                const carousel = document.getElementById('photoCarousel');
                if (!carousel) return;
                const current = parseInt(carousel.dataset.current || 0);
                goToSlide((current - 1 + totalSlides) % totalSlides);
            }

            setInterval(nextSlide, 5000);
            
            window.goToSlide = goToSlide;
            window.nextSlide = nextSlide;
            window.prevSlide = prevSlide;
        }

        function shareNative() {
            trackClick('share', 'native');
            if (navigator.share) {
                navigator.share({
                    title: businessName + ' | The Greek Directory',
                    text: 'Check out ' + businessName + ' on The Greek Directory!',
                    url: window.location.href.split('?')[0] + '?utm_source=native&utm_medium=share&utm_campaign=listing'
                }).catch(err => {
                    if (err.name !== 'AbortError') {
                        console.log('Share failed:', err);
                    }
                });
            } else {
                navigator.clipboard.writeText(window.location.href).then(() => {
                    alert('Link copied to clipboard!');
                }).catch(() => {
                    alert('Unable to share. Please copy the URL from your browser.');
                });
            }
        }

        /* Copyright (C) The Greek Directory, 2025-present. All rights reserved. */

        const coordinatesStr = '{{COORDINATES}}';
        const fullAddress = '{{FULL_ADDRESS}}';
        
        function initializeMap() {
            if (!coordinatesStr || coordinatesStr === '' || !fullAddress || fullAddress === '') {
                const mapSection = document.querySelector('#listingMap');
                if (mapSection && mapSection.parentElement) {
                    mapSection.parentElement.style.display = 'none';
                }
                return;
            }
            
            const mapElement = document.getElementById('listingMap');
            if (!mapElement) {
                return;
            }
            
            try {
                const coords = coordinatesStr.split(',');
                if (coords.length !== 2) {
                    if (mapElement.parentElement) {
                        mapElement.parentElement.style.display = 'none';
                    }
                    return;
                }
                
                const lat = parseFloat(coords[0].trim());
                const lng = parseFloat(coords[1].trim());
                
                if (isNaN(lat) || isNaN(lng)) {
                    if (mapElement.parentElement) {
                        mapElement.parentElement.style.display = 'none';
                    }
                    return;
                }
                
                if (typeof L === 'undefined') {
                    setTimeout(initializeMap, 500);
                    return;
                }
                
                const map = L.map('listingMap', {
                    center: [lat, lng],
                    zoom: 15,
                    zoomControl: true,
                    scrollWheelZoom: false
                });
                
                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    attribution: 'Â© OpenStreetMap contributors',
                    maxZoom: 19
                }).addTo(map);
                
                L.marker([lat, lng]).addTo(map)
                    .bindPopup('<strong>{{BUSINESS_NAME}}</strong><br>{{FULL_ADDRESS}}')
                    .openPopup();
                
                setTimeout(() => {
                    map.invalidateSize();
                }, 250);
                
                mapElement.addEventListener('click', function() {
                    this.classList.add('active');
                    map.scrollWheelZoom.enable();
                });

                mapElement.addEventListener('mouseleave', function() {
                    this.classList.remove('active');
                    map.scrollWheelZoom.disable();
                });
            } catch (e) {
                console.error('Map error:', e);
                if (mapElement && mapElement.parentElement) {
                    mapElement.parentElement.style.display = 'none';
                }
            }
        }
        
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => {
                setTimeout(initializeMap, 1000);
            });
        } else {
            setTimeout(initializeMap, 1000);
        }
        
        updateOpenClosedBadge();
        setInterval(updateOpenClosedBadge, 60000);
        
        /* Copyright (C) The Greek Directory, 2025-present. All rights reserved. */
    </script>
</body>
</html>

<!--
Copyright (C) The Greek Directory, 2025-present. All rights reserved.
This source code is proprietary and no part may not be used, reproduced, or distributed 
without written permission from The Greek Directory. Unauthorized use, copying, modification, 
or distribution of this code can result in legal action to the fullest extent permitted by law.
-->
